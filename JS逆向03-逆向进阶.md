# 逆向进阶

## 逆向核心

JS逆向的核心分为：**抠代码、补环境。**

### 抠代码

抠代码流程技巧以及优缺点：

```
流程：
1.缺啥补啥，深度优先
2.见文知义，化繁为简
3.了然于胸，如履平地
技巧：
1.如果Console方法在JS中被重写了，我们可以在第一行用一个变量保存Console_old=Console，在最后一行使用Console_old进行输出。这种解决方式，同样也适用其他方法。
2.当我们抠出了所有的JS代码时，最好放在一个大函数内，最后用return返回结果。
优点：
1.执行效率高
2.并发能力强
3.能感受到进度（抠出一行是一行）
4.只要有耐心，笨办法也能成大事
缺点：
1.比较吃经验，只有勤学苦练才能更快
2.若想精通则对js基础要求较高（尤其是对于浏览器API的掌握程度）
3.网站即使微调，js可能就会失效
4.做不到完全还原浏览器的某些值，对风控响应不够及时。
```

### 补环境

常用的补环境的方法：

```javascript
// 使用execjs运行js时遇到window未定义，添加下面的代码：
window=global
// 使用execjs运行js时遇到navigator is not defined报错，解决办法添加下面代码：
global.navigator={ userAgent: 'node.js', };即可
```

补环境优缺点：

```
优点：
1.复用性强、开发速度快
2.有现成的库可供调用（如 jsdom）
3.简单网站，相对于抠代码，对熟练度要求更低
4.仅需对服务器的混淆代码做少量处理即可。
缺点：
1. 占用资源大，计算速度可能慢
2. 若想高并发可能需要开发多种浏览器环境，增加时间成本
3. 对于极复杂的网站，可能更靠玄学。无法感受到进度的变化
4. 若想精通则对需对node指纹和浏览器API都足够精通
```

### 小结

```
1.难的网站这两种方法都难。反而抠代码由于可以看到进度不容易轻易放弃。
2.简单的网站补环境更爽，可能会秒破而且耗费不了多少资源。
3.我的建议：你爱用啥用啥（狗头护体）
```

